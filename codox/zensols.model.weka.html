<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>zensols.model.weka documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Interface for machine learning modeling, testing and training</span> <span class="project-version">0.0.18</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zensols</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>model</span></div></div></li><li class="depth-3 branch"><a href="zensols.model.classifier.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>classifier</span></div></a></li><li class="depth-3 branch"><a href="zensols.model.eval-classifier.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>eval-classifier</span></div></a></li><li class="depth-3 branch"><a href="zensols.model.execute-classifier.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>execute-classifier</span></div></a></li><li class="depth-3 branch"><a href="zensols.model.version.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>version</span></div></a></li><li class="depth-3 current"><a href="zensols.model.weka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>weka</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="zensols.model.weka.html#var-*classifiers*"><div class="inner"><span>*classifiers*</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-*cross-fold-info*"><div class="inner"><span>*cross-fold-info*</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-*missing-values-ok*"><div class="inner"><span>*missing-values-ok*</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-append-instances"><div class="inner"><span>append-instances</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-attribute-by-name"><div class="inner"><span>attribute-by-name</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-attributes-for-instances"><div class="inner"><span>attributes-for-instances</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-clone-classifier"><div class="inner"><span>clone-classifier</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-clone-instances"><div class="inner"><span>clone-instances</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-create-attrib"><div class="inner"><span>create-attrib</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-instances"><div class="inner"><span>instances</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-let-classifier"><div class="inner"><span>let-classifier</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-make-classifiers"><div class="inner"><span>make-classifiers</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-populate-instances"><div class="inner"><span>populate-instances</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-remove-attributes"><div class="inner"><span>remove-attributes</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-sparse-instances"><div class="inner"><span>sparse-instances</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-value"><div class="inner"><span>value</span></div></a></li><li class="depth-1"><a href="zensols.model.weka.html#var-value-for-instance"><div class="inner"><span>value-for-instance</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">zensols.model.weka</h1><div class="doc"><div class="markdown"><p>Wraps the Weka Java API. This is probably the wrong library to use for most uses. Instead take a look at <a href="zensols.model.eval-classifier.html">zensols.model.eval-classifier</a> and <a href="zensols.model.execute-classifier.html">zensols.model.execute-classifier</a>.</p></div></div><div class="public anchor" id="var-*classifiers*"><h3>*classifiers*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>An (incomplete) set of Weka classifiers keyed by their speed, type or singleton by name.</p>
<ul>
  <li><strong>fast</strong> train quickly</li>
  <li><strong>slow</strong> train slowly</li>
  <li><strong>really-slow</strong> train very very slowly</li>
  <li><strong>lazy</strong> lazy category</li>
  <li><strong>meta</strong> meta classifiers (i.e. boosting)</li>
  <li><strong>tree</strong> tree based classifiers (typically train quickly)</li>
</ul>
<p>The singleton classifiers is a list like the others but have only a single element of the class. They include: <code>zeror</code>, <code>svm</code>, <code>j48</code>, <code>random-forest</code>, <code>naivebays</code>, <code>logit</code>, <code>logitboost</code>, <code>smo</code>, <code>kstar</code>.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L16">view source</a></div></div><div class="public anchor" id="var-*cross-fold-info*"><h3>*cross-fold-info*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>When two-pass cross fold validations are used this is bound to the following map during the validation (see <a href="zensols.model.weka.html#var-clone-instances">clone-instances</a>):</p>
<ul>
  <li><strong>:train?</strong> <code>true</code> if creating folds during for the train phase, otherwise the test phase is used</li>
  <li><strong>:fold</strong> the number of the fold</li>
  <li><strong>:state</strong> state shared between training and testing (i.e. context)</li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L77">view source</a></div></div><div class="public anchor" id="var-*missing-values-ok*"><h3>*missing-values-ok*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Whether missing the classifier can handle missing values, otherwise an exception is thrown for missing values.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L72">view source</a></div></div><div class="public anchor" id="var-append-instances"><h3>append-instances</h3><div class="usage"><code>(append-instances src dst)</code></div><div class="doc"><div class="markdown"><p>Merge two instances row wise by adding dst to src.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L490">view source</a></div></div><div class="public anchor" id="var-attribute-by-name"><h3>attribute-by-name</h3><div class="usage"><code>(attribute-by-name instances name)</code></div><div class="doc"><div class="markdown"><p>Return a <code>weka.core.Attribute</code> instance by name from a <code>weka.core.Instances</code>.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L178">view source</a></div></div><div class="public anchor" id="var-attributes-for-instances"><h3>attributes-for-instances</h3><div class="usage"><code>(attributes-for-instances insts &amp; {:keys [sort?], :or {sort? true}})</code></div><div class="doc"><div class="markdown"><p>Return a map with <strong>:name</strong> and <strong>:type</strong> for each attribute in an <code>weka.core.Instances</code>.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L198">view source</a></div></div><div class="public anchor" id="var-clone-classifier"><h3>clone-classifier</h3><div class="usage"><code>(clone-classifier classifier)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L565">view source</a></div></div><div class="public anchor" id="var-clone-instances"><h3>clone-instances</h3><div class="usage"><code>(clone-instances inst &amp; {:keys [train-fn test-fn randomize-fn], :as opts})</code></div><div class="doc"><div class="markdown"><p>Return a deep clone of <strong>inst</strong>, optionally with a specific training and test set. See <a href="zensols.model.weka.html#var-*cross-fold-info*">*cross-fold-info*</a> to get information during the validation for debugging and analysis.</p>
<ul>
  <li><strong>inst</strong> an (object) instance of <code>weka.core.Instances</code> (the whole dataset)</li>
</ul>
<h2><a href="#keys" name="keys"></a>Keys</h2>
<ul>
  <li>
  <p><strong>train-fn</strong> a function that takes the following arguments: an <code>weka.core.Instances</code> created for the training set, number of folds, the fold number and a <code>java.util.Random</code> to pass to the Weka layer to shuffle the dataset</p></li>
  <li>
  <p><strong>test-fn</strong> just like <strong>train-fn</strong> but used to create the test data set and it doesnâ€™t take the <code>java.util.Random</code> instance</p></li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L413">view source</a></div></div><div class="public anchor" id="var-create-attrib"><h3>create-attrib</h3><div class="usage"><code>(create-attrib att-name type)</code></div><div class="doc"><div class="markdown"><p>Create a Weka Attribute instance with <strong>att-name</strong>.</p>
<p><strong>type</strong> is the type of attribute, which can be <code>string</code>, <code>boolean</code>, <code>numeric</code>, or a sequence of strings representing possible enumeration values (nominals in Weka speak).</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L111">view source</a></div></div><div class="public anchor" id="var-instances"><h3>instances</h3><div class="usage"><code>(instances inst-name feature-sets feature-metas)</code><code>(instances inst-name feature-sets feature-metas class-feature-meta &amp; {:keys [clone?], :or {clone? true}})</code></div><div class="doc"><div class="markdown"><p>Create a new <code>weka.core.Instances</code> instance.</p>
<ul>
  <li><strong>inst-name</strong> used to identify the model data set</li>
  <li><strong>feature-sets</strong> a sequence of maps with each map having key/value pairs of the features of the model to be populated in the returned <code>weka.core.Instances</code></li>
  <li><strong>feature-metas</strong> a map of key/value pairs describing the features (they become <code>weka.core.Attribute</code>s) where the values are <code>string</code>, <code>boolean</code>, <code>numeric</code>, or a sequence of strings representing possible enumeration values (nominals in Weka speak)</li>
  <li>
  <p><strong>class-feature-meta</strong> just like a (single) <strong>feature-metas</strong> but describes the class</p></li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L457">view source</a></div></div><div class="public anchor" id="var-let-classifier"><h3>let-classifier</h3><h4 class="type">macro</h4><div class="usage"><code>(let-classifier fdef-expr &amp; forms)</code></div><div class="doc"><div class="markdown"><p>fnspec ==&gt; (classifier-name [insts] exprs)</p>
<p>Define a classifier that uses Clojure code to evaluate <strong>insts</strong> instances and evaluate body <strong>exprs</strong>.</p>
<p>Example:</p>
<pre><code>(let-classifier
  (langid-baseline [inst]
     (let [attrib (weka/attribute-by-name inst "langid-1-id")
           val (.stringValue inst attrib)
           rval (= "en" val)]
       (log/infof "langid: %s for: %s: res: %s" val inst rval)
       (if rval 1 0)))
(terse-results lang-baseline meta-set))
</code></pre></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L568">view source</a></div></div><div class="public anchor" id="var-make-classifiers"><h3>make-classifiers</h3><div class="usage"><code>(make-classifiers)</code><code>(make-classifiers set-name-or-instance)</code></div><div class="doc"><div class="markdown"><p>Make classifiers from either a key in <a href="zensols.model.weka.html#var-*classifiers*">*classifiers*</a> or an instance of <code>weka.classifiers.Classifier</code> (meaning an already constructed instance). All classifiers are returned for the 0-arg option.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L87">view source</a></div></div><div class="public anchor" id="var-populate-instances"><h3>populate-instances</h3><div class="usage"><code>(populate-instances insts feature-metas feature-sets)</code></div><div class="doc"><div class="markdown"><p>Populate a <code>weka.core.Instances</code> instance Clojure data structures.</p>
<ul>
  <li><strong>inst</strong> a <code>weka.core.Instances</code> that will be populated</li>
  <li><strong>feature-metas</strong> a map of key/value pairs describing the features (they become <code>weka.core.Attribute</code>s) where the values are described as types in <a href="zensols.model.weka.html#var-create-attrib">create-attrib</a></li>
  <li><strong>feature-sets</strong> a sequence of maps with each map having key/value pairs of the features of the model to be populated in the returned <code>weka.core.Instances</code></li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L542">view source</a></div></div><div class="public anchor" id="var-remove-attributes"><h3>remove-attributes</h3><div class="usage"><code>(remove-attributes inst attrib-names &amp; {:keys [invert-selection?]})</code></div><div class="doc"><div class="markdown"><p>Remove a set of attributes from <strong>inst</strong> (<code>weka.core.Instances</code>) by string (string) name.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L518">view source</a></div></div><div class="public anchor" id="var-sparse-instances"><h3>sparse-instances</h3><div class="usage"><code>(sparse-instances maps dim &amp; {:keys [pattern class-attribute-name instance-name add-class? default-value], :or {pattern "f%d", class-attribute-name "class", instance-name "inst", add-class? true}})</code></div><div class="doc"><div class="markdown"><p>Create a sparse <code>core.weka.Instance</code> using a sequence of maps (<code>map</code>). The keys of the maps are the class with the values maps each with the key as the index and the value the weight. The <code>dim</code> parameter is the dimension of each instance.</p>
<h2><a href="#keys" name="keys"></a>Keys</h2>
<ul>
  <li><strong>:pattern</strong> a <a href="null">format</a> using one integer as the index (default: <code>f%d</code>)</li>
  <li><strong>:class-attribute</strong> the name of the output class (values are given from the keys of <code>maps</code>)</li>
  <li><strong>instance-name</strong> the name of the <code>Instance</code> created object and defaults to <code>inst</code></li>
  <li><strong>:add-class?</strong> if <code>true</code> add the class that comes from the key in <strong>maps</strong></li>
  <li><strong>default-value</strong> if a double replace missing values not in th emap with this value, otherwise missing values will be used</li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L246">view source</a></div></div><div class="public anchor" id="var-value"><h3>value</h3><div class="usage"><code>(value insts n name)</code></div><div class="doc"><div class="markdown"><p>Return the value for instance <strong>n</strong> in <code>core.weka.Instance</code> <strong>insts</strong> with attribute of <strong>name</strong>.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L507">view source</a></div></div><div class="public anchor" id="var-value-for-instance"><h3>value-for-instance</h3><div class="usage"><code>(value-for-instance val)</code><code>(value-for-instance type val)</code></div><div class="doc"><div class="markdown"><p>Return a Java variable that plays nicely with the Weka framework. If no <strong>type</strong> is given it tries to determine the type on its own.</p>
<ul>
  <li><strong>val</strong> is a Java primitive (wrapper)</li>
  <li><strong>type</strong> if given, is the type of <strong>val</strong> (see <a href="zensols.model.weka.html#var-create-attrib">create-attrib</a>)</li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-model/blob/v0.0.18/src/clojure/zensols/model/weka.clj#L156">view source</a></div></div></div></body></html>